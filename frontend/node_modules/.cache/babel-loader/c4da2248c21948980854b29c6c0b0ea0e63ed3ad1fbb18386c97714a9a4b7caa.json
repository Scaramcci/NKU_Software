{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u6587\\u96C5\\u7AF9\\\\\\u4F5C\\u4E1A\\\\\\u5927\\u4E09\\u4E0B\\\\\\u8F6F\\u4EF6\\u5DE5\\u7A0B\\\\NKU_Software-main2\\\\NKU_Software-main\\\\frontend\\\\src\\\\pages\\\\AlarmSystem\\\\index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchAlarms, fetchThresholds, fetchAlarmHistory, acknowledgeAlarm, updateThreshold } from '../../redux/reducers/alarmSlice';\nimport { Card, Table, Tag, Button, Tabs, Modal, Form, Input, InputNumber, Select, message, Badge, Space, Descriptions, Timeline, Alert, Divider, Row, Col, Statistic } from 'antd';\nimport { WarningOutlined, CheckCircleOutlined, BellOutlined, SettingOutlined, HistoryOutlined, ExclamationCircleOutlined } from '@ant-design/icons';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  TabPane\n} = Tabs;\nconst {\n  Option\n} = Select;\nconst AlarmSystem = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    alarms,\n    thresholds,\n    alarmHistory,\n    loading,\n    error\n  } = useSelector(state => state.alarm);\n  const [activeTab, setActiveTab] = useState('1');\n  const [thresholdModalVisible, setThresholdModalVisible] = useState(false);\n  const [selectedThreshold, setSelectedThreshold] = useState(null);\n  const [form] = Form.useForm();\n\n  // 获取数据\n  useEffect(() => {\n    dispatch(fetchAlarms());\n    dispatch(fetchThresholds());\n    dispatch(fetchAlarmHistory());\n  }, [dispatch]);\n\n  // 处理确认预警\n  const handleAcknowledge = alarmId => {\n    dispatch(acknowledgeAlarm(alarmId)).unwrap().then(() => {\n      message.success('预警已确认');\n    }).catch(err => {\n      message.error(err || '确认预警失败');\n    });\n  };\n\n  // 打开阈值设置模态框\n  const openThresholdModal = threshold => {\n    setSelectedThreshold(threshold);\n    form.setFieldsValue({\n      min: threshold.min,\n      max: threshold.max\n    });\n    setThresholdModalVisible(true);\n  };\n\n  // 处理阈值更新\n  const handleThresholdUpdate = values => {\n    dispatch(updateThreshold({\n      thresholdId: selectedThreshold.id,\n      updates: values\n    })).unwrap().then(() => {\n      message.success('阈值设置已更新');\n      setThresholdModalVisible(false);\n    }).catch(err => {\n      message.error(err || '更新阈值设置失败');\n    });\n  };\n\n  // 获取预警级别对应的标签颜色\n  const getAlarmLevelColor = level => {\n    switch (level) {\n      case 'critical':\n        return 'red';\n      case 'warning':\n        return 'orange';\n      default:\n        return 'blue';\n    }\n  };\n\n  // 获取设备状态对应的标签颜色\n  const getStatusColor = status => {\n    switch (status) {\n      case 'active':\n        return 'red';\n      case 'resolved':\n        return 'green';\n      default:\n        return 'default';\n    }\n  };\n\n  // 当前预警列表列定义\n  const alarmColumns = [{\n    title: '预警级别',\n    dataIndex: 'level',\n    key: 'level',\n    render: level => /*#__PURE__*/_jsxDEV(Tag, {\n      color: getAlarmLevelColor(level),\n      children: level === 'critical' ? '严重' : level === 'warning' ? '警告' : '一般'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '预警类型',\n    dataIndex: 'type',\n    key: 'type',\n    render: type => {\n      const typeMap = {\n        'temperature': '水温',\n        'oxygen': '溶氧量',\n        'ph': 'pH值',\n        'ammonia': '氨氮'\n      };\n      return typeMap[type] || type;\n    }\n  }, {\n    title: '养殖场',\n    dataIndex: 'farmName',\n    key: 'farmName'\n  }, {\n    title: '养殖池',\n    dataIndex: 'pondName',\n    key: 'pondName'\n  }, {\n    title: '当前值',\n    key: 'currentValue',\n    render: record => {\n      const unitMap = {\n        'temperature': '°C',\n        'oxygen': 'mg/L',\n        'ph': '',\n        'ammonia': 'mg/L'\n      };\n      return `${record.currentValue} ${unitMap[record.type] || ''}`;\n    }\n  }, {\n    title: '阈值范围',\n    key: 'threshold',\n    render: record => {\n      const {\n        min,\n        max\n      } = record.threshold;\n      const unitMap = {\n        'temperature': '°C',\n        'oxygen': 'mg/L',\n        'ph': '',\n        'ammonia': 'mg/L'\n      };\n      const unit = unitMap[record.type] || '';\n      if (min !== null && max !== null) {\n        return `${min} - ${max} ${unit}`;\n      } else if (min !== null) {\n        return `> ${min} ${unit}`;\n      } else if (max !== null) {\n        return `< ${max} ${unit}`;\n      }\n      return '未设置';\n    }\n  }, {\n    title: '预警信息',\n    dataIndex: 'message',\n    key: 'message'\n  }, {\n    title: '发生时间',\n    dataIndex: 'createdAt',\n    key: 'createdAt'\n  }, {\n    title: '状态',\n    key: 'status',\n    render: record => /*#__PURE__*/_jsxDEV(Badge, {\n      status: record.acknowledged ? 'success' : 'processing',\n      text: record.acknowledged ? '已确认' : '未确认'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '操作',\n    key: 'action',\n    render: record => /*#__PURE__*/_jsxDEV(Space, {\n      children: [!record.acknowledged && /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: () => handleAcknowledge(record.id),\n        children: \"\\u786E\\u8BA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        size: \"small\",\n        children: \"\\u8BE6\\u60C5\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this)\n  }];\n\n  // 阈值设置列定义\n  const thresholdColumns = [{\n    title: '参数类型',\n    dataIndex: 'name',\n    key: 'name'\n  }, {\n    title: '单位',\n    dataIndex: 'unit',\n    key: 'unit'\n  }, {\n    title: '最小值',\n    dataIndex: 'min',\n    key: 'min',\n    render: min => min === null ? '未设置' : min\n  }, {\n    title: '最大值',\n    dataIndex: 'max',\n    key: 'max',\n    render: max => max === null ? '未设置' : max\n  }, {\n    title: '适用范围',\n    key: 'scope',\n    render: record => record.isGlobal ? '全局' : `${record.farmName || ''} ${record.pondName || ''}`\n  }, {\n    title: '操作',\n    key: 'action',\n    render: record => /*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      size: \"small\",\n      onClick: () => openThresholdModal(record),\n      children: \"\\u7F16\\u8F91\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }, this)\n  }];\n\n  // 历史预警记录列定义\n  const historyColumns = [{\n    title: '预警级别',\n    dataIndex: 'level',\n    key: 'level',\n    render: level => /*#__PURE__*/_jsxDEV(Tag, {\n      color: getAlarmLevelColor(level),\n      children: level === 'critical' ? '严重' : level === 'warning' ? '警告' : '一般'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '预警类型',\n    dataIndex: 'type',\n    key: 'type',\n    render: type => {\n      const typeMap = {\n        'temperature': '水温',\n        'oxygen': '溶氧量',\n        'ph': 'pH值',\n        'ammonia': '氨氮'\n      };\n      return typeMap[type] || type;\n    }\n  }, {\n    title: '养殖场',\n    dataIndex: 'farmName',\n    key: 'farmName'\n  }, {\n    title: '养殖池',\n    dataIndex: 'pondName',\n    key: 'pondName'\n  }, {\n    title: '异常值',\n    key: 'value',\n    render: record => {\n      const unitMap = {\n        'temperature': '°C',\n        'oxygen': 'mg/L',\n        'ph': '',\n        'ammonia': 'mg/L'\n      };\n      return `${record.value} ${unitMap[record.type] || ''}`;\n    }\n  }, {\n    title: '预警信息',\n    dataIndex: 'message',\n    key: 'message'\n  }, {\n    title: '发生时间',\n    dataIndex: 'createdAt',\n    key: 'createdAt'\n  }, {\n    title: '解决时间',\n    dataIndex: 'resolvedAt',\n    key: 'resolvedAt'\n  }, {\n    title: '持续时间',\n    key: 'duration',\n    render: record => `${record.duration} 分钟`\n  }, {\n    title: '处理措施',\n    dataIndex: 'actions',\n    key: 'actions',\n    render: actions => actions.join('、')\n  }];\n\n  // 统计数据\n  const getAlarmStats = () => {\n    const criticalCount = alarms.filter(a => a.level === 'critical' && !a.acknowledged).length;\n    const warningCount = alarms.filter(a => a.level === 'warning' && !a.acknowledged).length;\n    const totalCount = alarms.filter(a => !a.acknowledged).length;\n    return {\n      criticalCount,\n      warningCount,\n      totalCount\n    };\n  };\n  const {\n    criticalCount,\n    warningCount,\n    totalCount\n  } = getAlarmStats();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"alarm-system-container\",\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      title: \"\\u9884\\u8B66\\u7CFB\\u7EDF\",\n      className: \"alarm-card\",\n      children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n        message: error,\n        type: \"error\",\n        showIcon: true,\n        style: {\n          marginBottom: 16\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        gutter: 16,\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          span: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Statistic, {\n              title: \"\\u5F53\\u524D\\u9884\\u8B66\\u603B\\u6570\",\n              value: totalCount,\n              valueStyle: {\n                color: totalCount > 0 ? '#ff4d4f' : '#3f8600'\n              },\n              prefix: /*#__PURE__*/_jsxDEV(BellOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Statistic, {\n              title: \"\\u4E25\\u91CD\\u9884\\u8B66\",\n              value: criticalCount,\n              valueStyle: {\n                color: criticalCount > 0 ? '#ff4d4f' : '#3f8600'\n              },\n              prefix: /*#__PURE__*/_jsxDEV(ExclamationCircleOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          span: 8,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Statistic, {\n              title: \"\\u8B66\\u544A\\u9884\\u8B66\",\n              value: warningCount,\n              valueStyle: {\n                color: warningCount > 0 ? '#faad14' : '#3f8600'\n              },\n              prefix: /*#__PURE__*/_jsxDEV(WarningOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tabs, {\n        activeKey: activeTab,\n        onChange: setActiveTab,\n        children: [/*#__PURE__*/_jsxDEV(TabPane, {\n          tab: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(BellOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), \"\\u5F53\\u524D\\u9884\\u8B66\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: alarmColumns,\n            dataSource: alarms.map(alarm => ({\n              ...alarm,\n              key: alarm.id\n            })),\n            loading: loading,\n            pagination: {\n              pageSize: 5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 13\n          }, this)\n        }, \"1\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n          tab: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(SettingOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 17\n            }, this), \"\\u9608\\u503C\\u8BBE\\u7F6E\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 15\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: thresholdColumns,\n            dataSource: thresholds.map(threshold => ({\n              ...threshold,\n              key: threshold.id\n            })),\n            loading: loading,\n            pagination: {\n              pageSize: 5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this)\n        }, \"2\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TabPane, {\n          tab: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(HistoryOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 17\n            }, this), \"\\u5386\\u53F2\\u8BB0\\u5F55\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 15\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: historyColumns,\n            dataSource: alarmHistory.map(history => ({\n              ...history,\n              key: history.id\n            })),\n            loading: loading,\n            pagination: {\n              pageSize: 5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 13\n          }, this)\n        }, \"3\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u7F16\\u8F91\\u9608\\u503C\\u8BBE\\u7F6E\",\n      visible: thresholdModalVisible,\n      onCancel: () => setThresholdModalVisible(false),\n      footer: null,\n      children: selectedThreshold && /*#__PURE__*/_jsxDEV(Form, {\n        form: form,\n        layout: \"vertical\",\n        onFinish: handleThresholdUpdate,\n        children: [/*#__PURE__*/_jsxDEV(Descriptions, {\n          title: \"\\u53C2\\u6570\\u4FE1\\u606F\",\n          column: 1,\n          style: {\n            marginBottom: 20\n          },\n          children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n            label: \"\\u53C2\\u6570\\u7C7B\\u578B\",\n            children: selectedThreshold.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n            label: \"\\u5355\\u4F4D\",\n            children: selectedThreshold.unit\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"min\",\n          label: \"\\u6700\\u5C0F\\u503C\",\n          rules: [{\n            message: '请输入有效的最小值'\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            placeholder: \"\\u4E0D\\u8BBE\\u7F6E\\u8BF7\\u7559\\u7A7A\",\n            style: {\n              width: '100%'\n            },\n            step: selectedThreshold.type === 'ph' ? 0.1 : 0.5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"max\",\n          label: \"\\u6700\\u5927\\u503C\",\n          rules: [{\n            message: '请输入有效的最大值'\n          }],\n          children: /*#__PURE__*/_jsxDEV(InputNumber, {\n            placeholder: \"\\u4E0D\\u8BBE\\u7F6E\\u8BF7\\u7559\\u7A7A\",\n            style: {\n              width: '100%'\n            },\n            step: selectedThreshold.type === 'ph' ? 0.1 : 0.5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"primary\",\n            htmlType: \"submit\",\n            loading: loading,\n            block: true,\n            children: \"\\u4FDD\\u5B58\\u8BBE\\u7F6E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n};\n_s(AlarmSystem, \"c+3Dy3182zQt7FKWmK+7QNZdGpc=\", false, function () {\n  return [useDispatch, useSelector, Form.useForm];\n});\n_c = AlarmSystem;\nexport default AlarmSystem;\nvar _c;\n$RefreshReg$(_c, \"AlarmSystem\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","fetchAlarms","fetchThresholds","fetchAlarmHistory","acknowledgeAlarm","updateThreshold","Card","Table","Tag","Button","Tabs","Modal","Form","Input","InputNumber","Select","message","Badge","Space","Descriptions","Timeline","Alert","Divider","Row","Col","Statistic","WarningOutlined","CheckCircleOutlined","BellOutlined","SettingOutlined","HistoryOutlined","ExclamationCircleOutlined","jsxDEV","_jsxDEV","TabPane","Option","AlarmSystem","_s","dispatch","alarms","thresholds","alarmHistory","loading","error","state","alarm","activeTab","setActiveTab","thresholdModalVisible","setThresholdModalVisible","selectedThreshold","setSelectedThreshold","form","useForm","handleAcknowledge","alarmId","unwrap","then","success","catch","err","openThresholdModal","threshold","setFieldsValue","min","max","handleThresholdUpdate","values","thresholdId","id","updates","getAlarmLevelColor","level","getStatusColor","status","alarmColumns","title","dataIndex","key","render","color","children","fileName","_jsxFileName","lineNumber","columnNumber","type","typeMap","record","unitMap","currentValue","unit","acknowledged","text","size","onClick","thresholdColumns","isGlobal","farmName","pondName","historyColumns","value","duration","actions","join","getAlarmStats","criticalCount","filter","a","length","warningCount","totalCount","className","showIcon","style","marginBottom","gutter","span","valueStyle","prefix","activeKey","onChange","tab","columns","dataSource","map","pagination","pageSize","history","visible","onCancel","footer","layout","onFinish","column","Item","label","name","rules","placeholder","width","step","htmlType","block","_c","$RefreshReg$"],"sources":["D:/文雅竹/作业/大三下/软件工程/NKU_Software-main2/NKU_Software-main/frontend/src/pages/AlarmSystem/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { \n  fetchAlarms, \n  fetchThresholds, \n  fetchAlarmHistory, \n  acknowledgeAlarm, \n  updateThreshold \n} from '../../redux/reducers/alarmSlice';\nimport { \n  Card, \n  Table, \n  Tag, \n  Button, \n  Tabs, \n  Modal, \n  Form, \n  Input, \n  InputNumber, \n  Select, \n  message, \n  Badge, \n  Space, \n  Descriptions, \n  Timeline,\n  Alert,\n  Divider,\n  Row,\n  Col,\n  Statistic\n} from 'antd';\nimport { \n  WarningOutlined, \n  CheckCircleOutlined, \n  BellOutlined, \n  SettingOutlined, \n  HistoryOutlined, \n  ExclamationCircleOutlined \n} from '@ant-design/icons';\n\nconst { TabPane } = Tabs;\nconst { Option } = Select;\n\nconst AlarmSystem = () => {\n  const dispatch = useDispatch();\n  const { alarms, thresholds, alarmHistory, loading, error } = useSelector(state => state.alarm);\n  \n  const [activeTab, setActiveTab] = useState('1');\n  const [thresholdModalVisible, setThresholdModalVisible] = useState(false);\n  const [selectedThreshold, setSelectedThreshold] = useState(null);\n  const [form] = Form.useForm();\n  \n  // 获取数据\n  useEffect(() => {\n    dispatch(fetchAlarms());\n    dispatch(fetchThresholds());\n    dispatch(fetchAlarmHistory());\n  }, [dispatch]);\n  \n  // 处理确认预警\n  const handleAcknowledge = (alarmId) => {\n    dispatch(acknowledgeAlarm(alarmId))\n      .unwrap()\n      .then(() => {\n        message.success('预警已确认');\n      })\n      .catch((err) => {\n        message.error(err || '确认预警失败');\n      });\n  };\n  \n  // 打开阈值设置模态框\n  const openThresholdModal = (threshold) => {\n    setSelectedThreshold(threshold);\n    form.setFieldsValue({\n      min: threshold.min,\n      max: threshold.max,\n    });\n    setThresholdModalVisible(true);\n  };\n  \n  // 处理阈值更新\n  const handleThresholdUpdate = (values) => {\n    dispatch(updateThreshold({ thresholdId: selectedThreshold.id, updates: values }))\n      .unwrap()\n      .then(() => {\n        message.success('阈值设置已更新');\n        setThresholdModalVisible(false);\n      })\n      .catch((err) => {\n        message.error(err || '更新阈值设置失败');\n      });\n  };\n  \n  // 获取预警级别对应的标签颜色\n  const getAlarmLevelColor = (level) => {\n    switch(level) {\n      case 'critical':\n        return 'red';\n      case 'warning':\n        return 'orange';\n      default:\n        return 'blue';\n    }\n  };\n  \n  // 获取设备状态对应的标签颜色\n  const getStatusColor = (status) => {\n    switch(status) {\n      case 'active':\n        return 'red';\n      case 'resolved':\n        return 'green';\n      default:\n        return 'default';\n    }\n  };\n  \n  // 当前预警列表列定义\n  const alarmColumns = [\n    {\n      title: '预警级别',\n      dataIndex: 'level',\n      key: 'level',\n      render: (level) => (\n        <Tag color={getAlarmLevelColor(level)}>\n          {level === 'critical' ? '严重' : level === 'warning' ? '警告' : '一般'}\n        </Tag>\n      ),\n    },\n    {\n      title: '预警类型',\n      dataIndex: 'type',\n      key: 'type',\n      render: (type) => {\n        const typeMap = {\n          'temperature': '水温',\n          'oxygen': '溶氧量',\n          'ph': 'pH值',\n          'ammonia': '氨氮'\n        };\n        return typeMap[type] || type;\n      }\n    },\n    {\n      title: '养殖场',\n      dataIndex: 'farmName',\n      key: 'farmName',\n    },\n    {\n      title: '养殖池',\n      dataIndex: 'pondName',\n      key: 'pondName',\n    },\n    {\n      title: '当前值',\n      key: 'currentValue',\n      render: (record) => {\n        const unitMap = {\n          'temperature': '°C',\n          'oxygen': 'mg/L',\n          'ph': '',\n          'ammonia': 'mg/L'\n        };\n        return `${record.currentValue} ${unitMap[record.type] || ''}`;\n      },\n    },\n    {\n      title: '阈值范围',\n      key: 'threshold',\n      render: (record) => {\n        const { min, max } = record.threshold;\n        const unitMap = {\n          'temperature': '°C',\n          'oxygen': 'mg/L',\n          'ph': '',\n          'ammonia': 'mg/L'\n        };\n        const unit = unitMap[record.type] || '';\n        \n        if (min !== null && max !== null) {\n          return `${min} - ${max} ${unit}`;\n        } else if (min !== null) {\n          return `> ${min} ${unit}`;\n        } else if (max !== null) {\n          return `< ${max} ${unit}`;\n        }\n        return '未设置';\n      },\n    },\n    {\n      title: '预警信息',\n      dataIndex: 'message',\n      key: 'message',\n    },\n    {\n      title: '发生时间',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n    },\n    {\n      title: '状态',\n      key: 'status',\n      render: (record) => (\n        <Badge \n          status={record.acknowledged ? 'success' : 'processing'} \n          text={record.acknowledged ? '已确认' : '未确认'} \n        />\n      ),\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (record) => (\n        <Space>\n          {!record.acknowledged && (\n            <Button \n              type=\"primary\" \n              size=\"small\" \n              onClick={() => handleAcknowledge(record.id)}\n            >\n              确认\n            </Button>\n          )}\n          <Button type=\"link\" size=\"small\">详情</Button>\n        </Space>\n      ),\n    },\n  ];\n  \n  // 阈值设置列定义\n  const thresholdColumns = [\n    {\n      title: '参数类型',\n      dataIndex: 'name',\n      key: 'name',\n    },\n    {\n      title: '单位',\n      dataIndex: 'unit',\n      key: 'unit',\n    },\n    {\n      title: '最小值',\n      dataIndex: 'min',\n      key: 'min',\n      render: (min) => min === null ? '未设置' : min,\n    },\n    {\n      title: '最大值',\n      dataIndex: 'max',\n      key: 'max',\n      render: (max) => max === null ? '未设置' : max,\n    },\n    {\n      title: '适用范围',\n      key: 'scope',\n      render: (record) => (\n        record.isGlobal ? '全局' : `${record.farmName || ''} ${record.pondName || ''}`\n      ),\n    },\n    {\n      title: '操作',\n      key: 'action',\n      render: (record) => (\n        <Button \n          type=\"primary\" \n          size=\"small\" \n          onClick={() => openThresholdModal(record)}\n        >\n          编辑\n        </Button>\n      ),\n    },\n  ];\n  \n  // 历史预警记录列定义\n  const historyColumns = [\n    {\n      title: '预警级别',\n      dataIndex: 'level',\n      key: 'level',\n      render: (level) => (\n        <Tag color={getAlarmLevelColor(level)}>\n          {level === 'critical' ? '严重' : level === 'warning' ? '警告' : '一般'}\n        </Tag>\n      ),\n    },\n    {\n      title: '预警类型',\n      dataIndex: 'type',\n      key: 'type',\n      render: (type) => {\n        const typeMap = {\n          'temperature': '水温',\n          'oxygen': '溶氧量',\n          'ph': 'pH值',\n          'ammonia': '氨氮'\n        };\n        return typeMap[type] || type;\n      }\n    },\n    {\n      title: '养殖场',\n      dataIndex: 'farmName',\n      key: 'farmName',\n    },\n    {\n      title: '养殖池',\n      dataIndex: 'pondName',\n      key: 'pondName',\n    },\n    {\n      title: '异常值',\n      key: 'value',\n      render: (record) => {\n        const unitMap = {\n          'temperature': '°C',\n          'oxygen': 'mg/L',\n          'ph': '',\n          'ammonia': 'mg/L'\n        };\n        return `${record.value} ${unitMap[record.type] || ''}`;\n      },\n    },\n    {\n      title: '预警信息',\n      dataIndex: 'message',\n      key: 'message',\n    },\n    {\n      title: '发生时间',\n      dataIndex: 'createdAt',\n      key: 'createdAt',\n    },\n    {\n      title: '解决时间',\n      dataIndex: 'resolvedAt',\n      key: 'resolvedAt',\n    },\n    {\n      title: '持续时间',\n      key: 'duration',\n      render: (record) => `${record.duration} 分钟`,\n    },\n    {\n      title: '处理措施',\n      dataIndex: 'actions',\n      key: 'actions',\n      render: (actions) => actions.join('、'),\n    },\n  ];\n  \n  // 统计数据\n  const getAlarmStats = () => {\n    const criticalCount = alarms.filter(a => a.level === 'critical' && !a.acknowledged).length;\n    const warningCount = alarms.filter(a => a.level === 'warning' && !a.acknowledged).length;\n    const totalCount = alarms.filter(a => !a.acknowledged).length;\n    \n    return { criticalCount, warningCount, totalCount };\n  };\n  \n  const { criticalCount, warningCount, totalCount } = getAlarmStats();\n  \n  return (\n    <div className=\"alarm-system-container\">\n      <Card title=\"预警系统\" className=\"alarm-card\">\n        {error && <Alert message={error} type=\"error\" showIcon style={{ marginBottom: 16 }} />}\n        \n        <Row gutter={16} style={{ marginBottom: 16 }}>\n          <Col span={8}>\n            <Card>\n              <Statistic \n                title=\"当前预警总数\" \n                value={totalCount} \n                valueStyle={{ color: totalCount > 0 ? '#ff4d4f' : '#3f8600' }}\n                prefix={<BellOutlined />}\n              />\n            </Card>\n          </Col>\n          <Col span={8}>\n            <Card>\n              <Statistic \n                title=\"严重预警\" \n                value={criticalCount} \n                valueStyle={{ color: criticalCount > 0 ? '#ff4d4f' : '#3f8600' }}\n                prefix={<ExclamationCircleOutlined />}\n              />\n            </Card>\n          </Col>\n          <Col span={8}>\n            <Card>\n              <Statistic \n                title=\"警告预警\" \n                value={warningCount} \n                valueStyle={{ color: warningCount > 0 ? '#faad14' : '#3f8600' }}\n                prefix={<WarningOutlined />}\n              />\n            </Card>\n          </Col>\n        </Row>\n        \n        <Tabs activeKey={activeTab} onChange={setActiveTab}>\n          <TabPane \n            tab={\n              <span>\n                <BellOutlined />\n                当前预警\n              </span>\n            } \n            key=\"1\"\n          >\n            <Table \n              columns={alarmColumns} \n              dataSource={alarms.map(alarm => ({ ...alarm, key: alarm.id }))} \n              loading={loading}\n              pagination={{ pageSize: 5 }}\n            />\n          </TabPane>\n          \n          <TabPane \n            tab={\n              <span>\n                <SettingOutlined />\n                阈值设置\n              </span>\n            } \n            key=\"2\"\n          >\n            <Table \n              columns={thresholdColumns} \n              dataSource={thresholds.map(threshold => ({ ...threshold, key: threshold.id }))} \n              loading={loading}\n              pagination={{ pageSize: 5 }}\n            />\n          </TabPane>\n          \n          <TabPane \n            tab={\n              <span>\n                <HistoryOutlined />\n                历史记录\n              </span>\n            } \n            key=\"3\"\n          >\n            <Table \n              columns={historyColumns} \n              dataSource={alarmHistory.map(history => ({ ...history, key: history.id }))} \n              loading={loading}\n              pagination={{ pageSize: 5 }}\n            />\n          </TabPane>\n        </Tabs>\n      </Card>\n      \n      {/* 阈值设置模态框 */}\n      <Modal\n        title=\"编辑阈值设置\"\n        visible={thresholdModalVisible}\n        onCancel={() => setThresholdModalVisible(false)}\n        footer={null}\n      >\n        {selectedThreshold && (\n          <Form\n            form={form}\n            layout=\"vertical\"\n            onFinish={handleThresholdUpdate}\n          >\n            <Descriptions title=\"参数信息\" column={1} style={{ marginBottom: 20 }}>\n              <Descriptions.Item label=\"参数类型\">{selectedThreshold.name}</Descriptions.Item>\n              <Descriptions.Item label=\"单位\">{selectedThreshold.unit}</Descriptions.Item>\n            </Descriptions>\n            \n            <Divider />\n            \n            <Form.Item\n              name=\"min\"\n              label=\"最小值\"\n              rules={[{ message: '请输入有效的最小值' }]}\n            >\n              <InputNumber \n                placeholder=\"不设置请留空\" \n                style={{ width: '100%' }}\n                step={selectedThreshold.type === 'ph' ? 0.1 : 0.5}\n              />\n            </Form.Item>\n            \n            <Form.Item\n              name=\"max\"\n              label=\"最大值\"\n              rules={[{ message: '请输入有效的最大值' }]}\n            >\n              <InputNumber \n                placeholder=\"不设置请留空\" \n                style={{ width: '100%' }}\n                step={selectedThreshold.type === 'ph' ? 0.1 : 0.5}\n              />\n            </Form.Item>\n            \n            <Form.Item>\n              <Button type=\"primary\" htmlType=\"submit\" loading={loading} block>\n                保存设置\n              </Button>\n            </Form.Item>\n          </Form>\n        )}\n      </Modal>\n    </div>\n  );\n};\n\nexport default AlarmSystem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}